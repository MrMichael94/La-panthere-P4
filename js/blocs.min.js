function setUpSpecialNavs(){$(".navbar-toggle").click(function(e){var t,a,i,o=$(this).closest("nav"),l=o.find("ul.site-navigation"),s=l.clone();l.parent().hasClass("nav-special")&&(e.stopPropagation(),$(this).hasClass("selected-nav")?($(".blocsapp-special-menu blocsnav").removeClass("open"),$(".selected-nav").removeClass("selected-nav"),setTimeout(function(){$(".blocsapp-special-menu").remove(),$("body").removeClass("lock-scroll"),$(".selected-nav").removeClass("selected-nav")},300)):($(this).addClass("selected-nav"),o=o.attr("class").replace("navbar","").replace("row",""),l=l.parent().attr("class").replace("navbar-collapse","").replace("collapse",""),$(".content-tint").length=-1,$("body").append('<div class="content-tint"></div>'),s.insertBefore(".page-container").wrap('<div class="blocsapp-special-menu '+o+'"><blocsnav class="'+l+'">'),$("blocsnav").prepend('<a class="close-special-menu animated fadeIn" style="animation-delay:0.5s;"><div class="close-icon"></div></a>'),t="fadeInRight",a=0,i=60,$(".blocsapp-special-menu blocsnav").hasClass("fullscreen-nav")?(t="fadeIn",i=100):$(".blocsapp-special-menu").hasClass("nav-invert")&&(t="fadeInLeft"),$(".blocsapp-special-menu blocsnav li").each(function(){$(this).parent().hasClass("dropdown-menu")?$(this).addClass("animated fadeIn"):(a+=i,$(this).attr("style","animation-delay:"+a+"ms").addClass("animated "+t))}),setTimeout(function(){$(".blocsapp-special-menu blocsnav").addClass("open"),$(".content-tint").addClass("on"),$("body").addClass("lock-scroll")},10)))}),$("body").on("mousedown touchstart",".content-tint, .close-special-menu",function(e){$(".content-tint").removeClass("on"),$(".selected-nav").click(),setTimeout(function(){$(".content-tint").remove()},10)}).on("click",".blocsapp-special-menu a",function(e){$(e.target).closest(".dropdown-toggle").length||$(".close-special-menu").mousedown()})}function extraNavFuncs(){$(".site-navigation a").click(function(e){$(e.target).closest(".dropdown-toggle").length||$(".navbar-collapse").collapse("hide")}),$("a.dropdown-toggle").click(function(e){$(this).parent().addClass("target-open-menu"),$(this).closest(".dropdown-menu").find(".dropdown.open").each(function(e){$(this).hasClass("target-open-menu")||$(this).removeClass("open")}),$(".target-open-menu").removeClass("target-open-menu")})}function setFillScreenBlocHeight(){$(".bloc-fill-screen").each(function(e){var t=$(this);window.fillBodyHeight=0,$(this).find(".container").each(function(e){fillPadding=2*parseInt($(this).css("padding-top")),fillBodyHeight=t.hasClass("bloc-group")?fillPadding+$(this).outerHeight()+50:fillBodyHeight+fillPadding+$(this).outerHeight()+50}),$(this).css("height",getFillHeight()+"px")})}function getFillHeight(){var e=$(window).height();return e<fillBodyHeight&&(e=fillBodyHeight+100),e}function scrollToTarget(e){1==e?e=0:2==e?e=$(document).height():(e=$(e).offset().top,$(".sticky-nav").length&&(e-=$(".sticky-nav .navbar-header").height())),$("html,body").animate({scrollTop:e},"slow"),$(".navbar-collapse").collapse("hide")}function animateWhenVisible(){hideAll(),inViewCheck(),$(window).scroll(function(){inViewCheck(),scrollToTopView(),stickyNavToggle()})}function setUpDropdownSubs(){$("ul.dropdown-menu [data-toggle=dropdown]").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).parent().siblings().removeClass("open"),$(this).parent().toggleClass("open"),(e=$(this).parent().children(".dropdown-menu")).offset().left+e.width()>$(window).width()&&e.addClass("dropmenu-flow-right")})}function stickyNavToggle(){var e,t=0,a="sticky";$(".sticky-nav").hasClass("fill-bloc-top-edge")&&("rgba(0, 0, 0, 0)"==(e=$(".fill-bloc-top-edge.sticky-nav").parent().css("background-color"))&&(e="#FFFFFF"),$(".sticky-nav").css("background",e),t=$(".sticky-nav").height(),a="sticky animated fadeInDown"),$(window).scrollTop()>t?($(".sticky-nav").addClass(a),"sticky"==a&&$(".page-container").css("padding-top",$(".sticky-nav").height())):($(".sticky-nav").removeClass(a).removeAttr("style"),$(".page-container").removeAttr("style"))}function hideAll(){$(".animated").each(function(e){$(this).closest(".hero").length||$(this).removeClass("animated").addClass("hideMe")})}function inViewCheck(){$($(".hideMe").get().reverse()).each(function(e){var t,a=jQuery(this),i=a.offset().top+a.height(),o=$(window).scrollTop()+$(window).height();a.height()>$(window).height()&&(i=a.offset().top),i<o&&(t=a.attr("class").replace("hideMe","animated"),a.css("visibility","hidden").removeAttr("class"),setTimeout(function(){a.attr("class",t).css("visibility","visible")},.01))})}function scrollToTopView(){$(window).scrollTop()>$(window).height()/3?$(".scrollToTop").hasClass("showScrollTop")||$(".scrollToTop").addClass("showScrollTop"):$(".scrollToTop").removeClass("showScrollTop")}function setUpVisibilityToggle(){$(document).on("click","[data-toggle-visibility]",function(e){e.preventDefault();var t,e=$(this).attr("data-toggle-visibility");function a(e){e.is("img")?e.toggle():e.slideToggle()}-1!=e.indexOf(",")?(t=e.split(","),$.each(t,function(e){a($("#"+t[e]))})):a($("#"+e))})}function setUpLightBox(){window.targetLightbox,$(document).on("click","[data-lightbox]",function(e){e.preventDefault();var t=(targetLightbox=$(this)).attr("data-lightbox"),a=targetLightbox.attr("data-autoplay"),i='<p class="lightbox-caption">'+targetLightbox.attr("data-caption")+"</p>",o="no-gallery-set",l=targetLightbox.attr("data-frame");targetLightbox.attr("data-gallery-id")&&(o=targetLightbox.attr("data-gallery-id")),targetLightbox.attr("data-caption")||(i=""),e="",1==a&&(e="autoplay"),i=$('<div id="lightbox-modal" class="modal fade"><div class="modal-dialog"><div class="modal-content '+l+' blocs-lb-container"><button id="blocs-lightbox-close-btn" type="button" class="close-lightbox" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><a href="#" class="prev-lightbox" aria-label="prev"><span class="fa fa-chevron-left"></span></a><a href="#" class="next-lightbox" aria-label="next"><span class="fa fa-chevron-right"></span></a><img id="lightbox-image" class="img-responsive" src="'+t+'"><div id="lightbox-video-container" class="embed-responsive embed-responsive-16by9"><video controls '+e+' class="embed-responsive-item"><source id="lightbox-video" src="'+t+'" type="video/mp4"></video></div>'+i+"</div></div></div></div>"),$("body").append(i),"fullscreen-lb"==l&&($("#lightbox-modal").addClass("fullscreen-modal").append('<a class="close-full-screen-modal animated fadeIn" style="animation-delay:0.5s;" onclick="$(\'#lightbox-modal\').modal(\'hide\');"><div class="close-icon"></div></a>'),$("#blocs-lightbox-close-btn").remove()),".mp4"==t.substring(t.length-4)?($("#lightbox-image, .lightbox-caption").hide(),$("#lightbox-video-container").show()):($("#lightbox-image,.lightbox-caption").show(),$("#lightbox-video-container").hide()),$("#lightbox-modal").modal("show"),"no-gallery-set"==o?(0==$("a[data-lightbox]").index(targetLightbox)&&$(".prev-lightbox").hide(),$("a[data-lightbox]").index(targetLightbox)==$("a[data-lightbox]").length-1&&$(".next-lightbox").hide()):(0==$('a[data-gallery-id="'+o+'"]').index(targetLightbox)&&$(".prev-lightbox").hide(),$('a[data-gallery-id="'+o+'"]').index(targetLightbox)==$('a[data-gallery-id="'+o+'"]').length-1&&$(".next-lightbox").hide()),addLightBoxSwipeSupport()}).on("hidden.bs.modal","#lightbox-modal",function(){$("#lightbox-modal").remove()}),$(document).on("click",".next-lightbox, .prev-lightbox",function(e){e.preventDefault();var t="no-gallery-set",a=$("a[data-lightbox]").index(targetLightbox),i=$("a[data-lightbox]").eq(a+1);targetLightbox.attr("data-gallery-id")&&(a=$('a[data-gallery-id="'+(t=targetLightbox.attr("data-gallery-id"))+'"]').index(targetLightbox),i=$('a[data-gallery-id="'+t+'"]').eq(a+1)),$(this).hasClass("prev-lightbox")&&(i=$('a[data-gallery-id="'+t+'"]').eq(a-1),"no-gallery-set"==t&&(i=$("a[data-lightbox]").eq(a-1))),".mp4"==(e=i.attr("data-lightbox")).substring(e.length-4)?(a="",1==i.attr("data-autoplay")&&(a="autoplay"),$("#lightbox-image, .lightbox-caption").hide(),$("#lightbox-video-container").show().html("<video controls "+a+' class="embed-responsive-item"><source id="lightbox-video" src="'+e+'" type="video/mp4"></video>')):($("#lightbox-image").attr("src",e).show(),$(".lightbox-caption").html(i.attr("data-caption")).show(),$("#lightbox-video-container").hide()),targetLightbox=i,$(".next-lightbox, .prev-lightbox").hide(),"no-gallery-set"==t?($("a[data-lightbox]").index(i)!=$("a[data-lightbox]").length-1&&$(".next-lightbox").show(),0<$("a[data-lightbox]").index(i)&&$(".prev-lightbox").show()):($('a[data-gallery-id="'+t+'"]').index(i)!=$('a[data-gallery-id="'+t+'"]').length-1&&$(".next-lightbox").show(),0<$('a[data-gallery-id="'+t+'"]').index(i)&&$(".prev-lightbox").show())})}function addSwipeSupport(){$(".carousel-inner").length&&$(".carousel-inner").swipe({swipeLeft:function(e,t,a,i,o){$(this).parent().carousel("next")},swipeRight:function(){$(this).parent().carousel("prev")},threshold:0})}function addKeyBoardSupport(){$(window).keydown(function(e){37==e.which?$(".prev-lightbox").is(":visible")&&$(".prev-lightbox").click():39==e.which&&$(".next-lightbox").is(":visible")&&$(".next-lightbox").click()})}function addLightBoxSwipeSupport(){$("#lightbox-image").length&&$("#lightbox-image").swipe({swipeLeft:function(e,t,a,i,o){$(".next-lightbox").is(":visible")&&$(".next-lightbox").click()},swipeRight:function(){$(".prev-lightbox").is(":visible")&&$(".prev-lightbox").click()},threshold:0})}$(document).ready(function(){$("#scroll-hero").click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:$("#scroll-hero").closest(".bloc").height()},"slow")}),extraNavFuncs(),setUpSpecialNavs(),setUpDropdownSubs(),setUpLightBox(),setUpVisibilityToggle(),addSwipeSupport(),addKeyBoardSupport(),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$("#page-loading-blocs-notifaction").remove()}),$(window).load(function(){setFillScreenBlocHeight(),animateWhenVisible(),$("#page-loading-blocs-notifaction").remove()}).resize(function(){setFillScreenBlocHeight()}),$(function(){$('[data-toggle="tooltip"]').tooltip()});